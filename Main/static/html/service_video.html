<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>SoftLand Bootstrap Template - Index</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="static/img/favicon.png" rel="icon">
  <link href="static/img/apple-touch-icon.png" rel="apple-touch-icon">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,600,700" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="static/vendor/aos/aos.css" rel="stylesheet">
  <link href="static/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="static/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="static/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="static/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">

  <!-- Template Main CSS File -->
  <link href="static/css/style.css" rel="stylesheet">
  <link href="static/css/service_css.css" rel="stylesheet">
</head>
<body>
  <!-- 导航栏 -->
  <header id="header" class="fixed-top d-flex align-items-center">
    <div class="container d-flex justify-content-between align-items-center" style="width: 1800px;">
  
  		<nav id="navbar" class="navbar" >
  		  <ul>
  		    <li><a href="index.html" style="font-size: 20px;padding-right: 25px;">首页</a></li>
  		    <li class="dropdown"><a class="active" href="#"  style="font-size: 20px;"><span>服务</span> <i class="bi bi-chevron-down"></i></a>
  		      <ul style="width: 100px">
  		        <li><a href="service_photo.html">图片检测</a></li>
  		        <li><a href="service_video.html">视频检测</a></li>
  		      </ul>
  		    </li>
  		    <li><a href="article.html" style="font-size: 20px;padding-right: 25px;">论坛</a></li>
  		    <li><a href="help.html" style="font-size: 20px;">帮助</a></li>
  		  </ul>
  		  <i class="bi bi-list mobile-nav-toggle"></i>
  		</nav><!-- .navbar -->
  
        <nav id="navbar" class="navbar">
          <ul>
            <li>
              <a href="#" style="font-size: 20px;" id="login-button">登录</a>
              <!-- 用户头像占位符 -->
  
                <li id="user-avatar" class="dropdown" style="display: none">
                <a href="#"  style="font-size: 20px;padding-right: 25px;"><img id="user-avatar_url" src="" alt="用户头像" style="width: 40px; height: 40px; border-radius: 50%;"><i class="bi bi-chevron-down"></i></a>
  		      <ul style="width:100px ">
  		        <li><a href="center.html" >个人中心</a></li>
  		        <li><a id='exit' href="#">退出登录</a></li>
  		      </ul>
  		    </li>
  
            </li>
          </ul>
          <i class="bi bi-list mobile-nav-toggle"></i>
        </nav>
  
    </div>
  </header>

  <!-- 主体容器 -->
  <div id="main-container">
    <!-- 左侧面板：上传图片及参数设置 -->
    <div id="left-panel">
      <div class="image-container" onclick="openFileDialog()" id="original-image-container">
          <!-- 修改 accept 属性为 video/*，支持上传视频 -->
          <input type="file" id="file-input" accept="video/*" onchange="displaySelectedVideo(event)" style="display: none;">
          <div class="placeholder">点击上传视频</div>
		  <!-- 视频显示区域 -->
		  <video id="video-preview" controls style="display: none; width: 100%;"></video>
      </div>
      
      <!-- 置信度滑块 -->
      <label for="conf-threshold">置信度阈值:</label>
      <div class="slider-container">
        <input type="range" id="conf-threshold" min="0" max="1" step="0.1" value="0.5">
        <span id="conf-value">0.5</span>
      </div>
      <!-- 是否展示置信度开关 -->
      <div class="openconf-container">
        <label>显示置信度:</label>
        <label class="switch">
          <input type="checkbox" id="show-confidence-switch">
          <span class="switch-slider"></span>
        </label>
      </div>
      <!-- 场景选择模块 -->
      <div class="radio-group" style="display: flex; align-items: center">
        <label>场景:</label>
        <label class="radio-item">
          <input type="radio" name="tool1" value="yolov8s" checked> 自然目标
        </label>
        <label class="radio-item">
          <input type="radio" name="tool1" value="yolov8s" checked> 遥感小目标
        </label>
        <label class="radio-item">
          <input type="radio" name="tool1" value="yolov8n"> 遥感多尺度目标
        </label>
        <label class="radio-item">
          <input type="radio" name="tool2" value="yolov8n"> 轻量化
        </label>
      </div>
      <!-- 模型选择（下拉菜单） -->
      <div class="select-group" style="display: flex; align-items: center; gap: 14px;">
        <label>模型:</label>
        <select name="model" class="model-select">
          <option value="static/Detect/TrainedModels/DIOR/yolov8s.pt" selected>yolov8s</option>
          <option value="static/Detect/TrainedModels/DIOR/yolov8n.pt">yolov8n</option>
        </select>
      </div>
      <!-- 目标类别选择 -->
      <div class="target-selection" style="display: flex;align-items: center">
        <label class="title">类别：</label>
        <div class="checkbox-group" id="target-checkbox-group" style="display: flex; align-items: center; gap: 3px;">
          <label class="checkbox-item">
            <input type="checkbox" id="select-all" value="all"> 全选
          </label>
        </div>
      </div>
      <!-- 数据展示区域 -->
      <div class="data-container">
        <div class="data-summary" style="padding: 10px">
          <span>总目标数: <strong id="total-targets"></strong></span>
          <span>检测用时: <strong id="detection-time">&nbsp;&nbsp;&nbsp;&nbsp;</strong></span>
        </div>
        <div class="scrollable-form">
          <table>
            <thead>
              <tr>
                <th>序号</th>
                <th>类别</th>
                <th>坐标</th>
                <th>置信度</th>
                <th>备注</th>
              </tr>
            </thead>
            <tbody id="form-content">
              <!-- 动态数据将插入到这里 -->
            </tbody>
          </table>
        </div>
      </div>
      <div class="button-container">
        <button id="detect-button">检测</button>
        <button id="reload-button">分析</button>
        <button id="save-button">保存</button>
      </div>
    </div>

    <!-- 右侧面板：检测结果展示 -->
    <div id="right-panel">
      <div class="result-container" id="detection-result">
        <!-- 检测结果显示区域 -->
      </div>
    </div>
  </div>

  <script src="static/js/service_script.js"></script>
  <script src="static/js/main.js"></script>
  <script>
	  // 处理上传的视频文件
	  function displaySelectedVideo(event) {
	      const fileInput = event.target;
	      const videoPreview = document.getElementById('video-preview');
	      const placeholder = document.querySelector('.placeholder');
	  
	      if (fileInput.files && fileInput.files[0]) {
	          const file = fileInput.files[0];
	  
	          // 检查文件类型是否为视频
	          if (file.type.startsWith('video/')) {
	              const videoURL = URL.createObjectURL(file);
	  
	              // 显示视频预览
	              videoPreview.src = videoURL;
	              videoPreview.style.display = 'block';
	              placeholder.style.display = 'none'; // 隐藏提示文字
	          } else {
	              alert('请上传有效的视频文件！');
	          }
	      }
	  }
  </script>
</body>
</html>
